<!DOCTYPE html><html lang="fr"><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>Angular 2 - Gérer une liste de pizzas - WikiDoc</title><link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/dracula.min.css"/><link rel="stylesheet" href="https://boxydev.github.io/WikiDoc/css/main.css"/></head><body><nav><div class="wrap"><a class="nav-home" href="https://boxydev.github.io/WikiDoc/index.html"><img class="nav-logo" src="https://www.boxydev.com/img/logo.png" alt="WikiDoc"/>  WikiDoc</a><div class="nav-list"><ul class="nav-left"><li><a class="" href="https://boxydev.github.io/WikiDoc/index.html">Accueil</a></li><li><a class="" href="https://boxydev.github.io/WikiDoc/about.html">A propos</a></li></ul><ul class="nav-right"><li><a target="_blank" href="https://github.com/Boxydev/WikiDoc">GitHub</a></li></ul></div></div></nav><section class="wrap page-content"><a class="edit-page-link" href="https://github.com/boxydev/WikiDoc/tree/master/src/data/pages/angular2/gerer-une-liste-de-pizzas.md" target="_blank">Modifier sur GitHub</a><div><h1 id="g-rer-une-liste-de-pizzas">Gérer une liste de pizzas</h1>
<p>On peut créer une constante qui sera un tableau contenant nos pizzas. On remarque le typage bien présent grâce à TypeScript, on attend bien un <strong>tableau de pizzas</strong>. Angular 2 est très &quot;java-esque&quot; sur les bords. On peut écrire ce code juste après la déclaration de la classe Pizza.</p>
<pre><code class="lang-js">const PIZZAS : Pizza[] = [
  { id: 1, name: &#39;Reine&#39;, price: 12 },
  { id: 2, name: &#39;4 fromages&#39;, price: 13 },
  { id: 3, name: &#39;Orientale&#39;, price: 11 },
  { id: 4, name: &#39;Cannibale&#39;, price: 9 }
];
</code></pre>
<p>On crée une propriété pizza dans notre classe AppComponent qui stocke le tableau de pizzas. On peut ensuite parcourir le tableau afin d&#39;afficher chaque pizza dans un li grâce à la directive <code>*ngFor</code> d&#39;Angular 2.</p>
<pre><code class="lang-js">@Component({
  // ...
  template: `
    ...
    &lt;h2&gt;Les pizzas&lt;/h2&gt;
    &lt;ul class=&quot;pizzas&quot;&gt;
      &lt;li *ngFor=&quot;let pizza of pizzas&quot;&gt;
        &lt;span&gt;{{pizza.id}}: {{pizza.name}}&lt;/span&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  `,
})
export class AppComponent {
  // ...
  pizzas = PIZZAS;
  // ...
}
</code></pre>
<h2 id="un-peu-de-css">Un peu de CSS</h2>
<p>On peut ajouter un peu de CSS grâce à la propriété styles du décorateur Component.</p>
<pre><code class="lang-js">styles: [`
  .pizzas li:hover {
    cursor: pointer;
  }
`]
</code></pre>
<h2 id="un-peu-d-v-nement">Un peu d&#39;événement</h2>
<p>Et maintenant un petit écouteur d&#39;événement au click sur une pizza. Un petit <code>console.log</code> pour vérifier la valeur.</p>
<pre><code class="lang-js">&lt;li *ngFor=&quot;let pizza of pizzas&quot; (click)=&quot;onSelect(pizza)&quot;&gt;

export class AppComponent {
  // ...
  onSelect(pizza: Pizza): void {
    console.log(pizza);
  }
}
</code></pre>
<p>On refactorise quelque peu notre code afin d&#39;avoir une première chose qui fonctionne bien.</p>
<pre><code class="lang-js">@Component({
  // ...
  template: `
    ...
    &lt;div *ngIf=&quot;selectedPizza&quot;&gt;
      &lt;h2&gt;{{selectedPizza.name}}&lt;/h2&gt;
      &lt;div&gt;&lt;label&gt;id: &lt;/label&gt;{{selectedPizza.id}}&lt;/div&gt;
      &lt;div&gt;
        &lt;label&gt;name: &lt;/label&gt;
        &lt;input [(ngModel)]=&quot;selectedPizza.name&quot; placeholder=&quot;name&quot;&gt;
      &lt;/div&gt;
      &lt;div&gt;&lt;label&gt;age: &lt;/label&gt;{{selectedPizza.age}}&lt;/div&gt;
    &lt;/div&gt;
    ...
  `,
  // ...
})
export class AppComponent {
  // ...
  selectedPizza: Pizza;

  onSelect(pizza: Pizza): void {
    this.selectedPizza = pizza;
  }
  // ...
}
</code></pre>
<p>Essayons maintenant de cliquer sur une pizza.</p>
<p><a href="../angular2">Retour au sommaire Angular 2</a>.</p>
</div></section><footer><div class="wrap">Copyright © 2018 Boxydev Inc.</div></footer><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://boxydev.github.io/WikiDoc/js/app.js"></script></body></html>